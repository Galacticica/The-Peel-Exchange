{% extends "base.html" %}

{% block content %}
<div class="container mx-auto py-6">
	<h1 class="text-2xl font-semibold mb-2">Portfolio — {{ user_obj.first_name }} {{ user_obj.last_name }}</h1>

	<div class="mb-4">
		<p><strong>Cash balance:</strong> ${{ balance }}</p>
        <p><strong>Stocks total:</strong> ${{ stocks_total }}</p>
		<p><strong>Total portfolio worth:</strong> ${{ portfolio_worth }}</p>
	</div>

	<h2 class="text-xl font-medium mb-2">Holdings</h2>

	{% if holdings %}
		<table class="table-auto w-full border-collapse">
			<thead>
				<tr class="bg-gray-100">
					<th class="px-4 py-2 text-left">Name</th>
					<th class="px-4 py-2 text-left">Symbol</th>
					<th class="px-4 py-2 text-left">Trend</th>
					<th class="px-4 py-2 text-right">Price</th>
					<th class="px-4 py-2 text-right">Quantity</th>
					<th class="px-4 py-2 text-right">Total</th>
				</tr>
			</thead>
			<tbody>
				{% for h in holdings %}
				<tr class="border-t">
					<td class="px-4 py-2">{{ h.name }}</td>
					<td class="px-4 py-2">{{ h.symbol }}</td>
					<td class="px-4 py-2">
						{% if h.direction == 1 %}
							<span class="text-green-600" title="Up">&#9650;</span>
						{% elif h.direction == -1 %}
							<span class="text-red-600" title="Down">&#9660;</span>
						{% else %}
							<span class="text-gray-500" title="No change">—</span>
						{% endif %}
					</td>
					<td class="px-4 py-2 text-right">${{ h.price }}</td>
					<td class="px-4 py-2 text-right">{{ h.shares }}</td>
					<td class="px-4 py-2 text-right">${{ h.total }}</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
	{% else %}
		<p>You don't own any stocks yet.</p>
	{% endif %}

</div>
{% endblock %}